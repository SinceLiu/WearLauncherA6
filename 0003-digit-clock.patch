From b1b76114300e0277a30d3486c2be2b37df5031a7 Mon Sep 17 00:00:00 2001
From: lxx <lxx@readboy.com>
Date: Mon, 24 Jun 2019 17:06:52 +0800
Subject: [PATCH 3/3] =?UTF-8?q?=E4=BC=98=E5=8C=96digit=20clock=E5=88=B7?=
 =?UTF-8?q?=E6=96=B0?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 .../readboy/wearlauncher/battery/BatteryLevelImageView.java  | 1 -
 app/src/com/readboy/wearlauncher/fragment/DaialFragment.java | 5 +----
 .../com/readboy/wearlauncher/notification/DateTimeView.java  | 1 -
 app/src/com/readboy/wearlauncher/view/DigitClock.java        | 1 -
 4 files changed, 1 insertion(+), 7 deletions(-)

diff --git a/app/src/com/readboy/wearlauncher/battery/BatteryLevelImageView.java b/app/src/com/readboy/wearlauncher/battery/BatteryLevelImageView.java
index e081331..4836eee 100644
--- a/app/src/com/readboy/wearlauncher/battery/BatteryLevelImageView.java
+++ b/app/src/com/readboy/wearlauncher/battery/BatteryLevelImageView.java
@@ -167,7 +167,6 @@ public class BatteryLevelImageView extends ImageView implements BatteryControlle
     @Override
     public void onVisibilityAggregated(boolean isVisible) {
         super.onVisibilityAggregated(isVisible);
-        Log.e("lxx","onVisibilityAggregated:"+isVisible);
         if (isVisible) {
             if (mBatteryController == null) {
                 mBatteryController = new BatteryController(mContext);
diff --git a/app/src/com/readboy/wearlauncher/fragment/DaialFragment.java b/app/src/com/readboy/wearlauncher/fragment/DaialFragment.java
index 01f9b69..0298ee3 100644
--- a/app/src/com/readboy/wearlauncher/fragment/DaialFragment.java
+++ b/app/src/com/readboy/wearlauncher/fragment/DaialFragment.java
@@ -2,7 +2,6 @@ package com.readboy.wearlauncher.fragment;
 
 import android.os.Bundle;
 import android.support.v4.app.Fragment;
-import android.util.Log;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
@@ -26,7 +25,6 @@ public class DaialFragment extends Fragment {
     private boolean isViewCreated;  //防止空指针，setUserVisibleHint()比onCreateView()快
     private boolean isPaused;
     private boolean isDialPaused;  //避免重复调用dialPause()
-    private boolean isUIVisible;
 
     public DaialFragment() {
 
@@ -35,7 +33,6 @@ public class DaialFragment extends Fragment {
     @Override
     public void setUserVisibleHint(boolean isVisibleToUser) {
         super.setUserVisibleHint(isVisibleToUser);
-        isUIVisible = isVisibleToUser;
     }
 
     @Override
@@ -101,7 +98,7 @@ public class DaialFragment extends Fragment {
             return;
         }
         View view = mDaialView.getChildAt(0);
-        if (view instanceof DialBaseLayout) {
+        if (view instanceof DialBaseLayout && view.isShown()) {
             ((DialBaseLayout) view).onResume();
             ((DialBaseLayout) view).onDateChange();
             ((DialBaseLayout) view).addChangedCallback();
diff --git a/app/src/com/readboy/wearlauncher/notification/DateTimeView.java b/app/src/com/readboy/wearlauncher/notification/DateTimeView.java
index 7bbfa9c..ba8b09b 100644
--- a/app/src/com/readboy/wearlauncher/notification/DateTimeView.java
+++ b/app/src/com/readboy/wearlauncher/notification/DateTimeView.java
@@ -343,7 +343,6 @@ public class DateTimeView extends TextView {
             public void onReceive(Context context, Intent intent) {
                 String action = intent.getAction();
                 if (Intent.ACTION_TIME_TICK.equals(action)) {
-                    Log.e("lxx","DateTimeView:TIME_TICK");
                     if (System.currentTimeMillis() < getSoonestUpdateTime()) {
                         // The update() function takes a few milliseconds to run because of
                         // all of the time conversions it needs to do, so we can't do that
diff --git a/app/src/com/readboy/wearlauncher/view/DigitClock.java b/app/src/com/readboy/wearlauncher/view/DigitClock.java
index ff3b081..2dcd15a 100644
--- a/app/src/com/readboy/wearlauncher/view/DigitClock.java
+++ b/app/src/com/readboy/wearlauncher/view/DigitClock.java
@@ -303,7 +303,6 @@ public class DigitClock extends LinearLayout {
 
         @Override
         public void run() {
-            Log.e("lxx","clock running:"+hashCode());
             Calendar calendar = Calendar.getInstance();
             if (DateFormat.is24HourFormat(mContext)) {
                 mHour = calendar.get(Calendar.HOUR_OF_DAY);
-- 
2.18.0.windows.1

